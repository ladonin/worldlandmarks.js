php_value upload_max_filesize 16M
php_value post_max_size 16M
php_value memory_limit 2048M
php_value max_execution_time 30000
php_value max_input_time 30000
php_value session.gc_maxlifetime 120000

AddDefaultCharset UTF-8
Options -Indexes

RewriteEngine on


RewriteRule ^(error_works\.php)$  maps_link/$1 [L]
RewriteRule ^(error_404\.php)$  maps_link/$1 [L]

RewriteRule ^(css|javascript|img|files)/(.+)$  maps_link/$1/$2 [L]


RewriteRule ^(admin)$  maps_link/$1/index.php [L]
RewriteRule ^(admin)/(.+)$  maps_link/$1/$2?type=landmarks&%{QUERY_STRING} [L]






# запрещаем выполнять файлы, не относящиеся к картинкам
RewriteCond %{REQUEST_URI} !(files/temp)/.*\.(jpg|jpeg|gif|png)$
RewriteRule (files/temp)/(.*)$  - [F]

# запрещаем выполнять файлы, не относящиеся к картинкам
RewriteCond %{REQUEST_URI} !files/.*\.(jpg|jpeg|gif|png)$
RewriteRule files/(.*)$  - [F]


#спам сервис
RewriteRule ^(not_interest|interest)$ maps_link/admin/_spam/$1.php?%{QUERY_STRING} [L]


# --> страница админского доступа
RewriteRule ^admin_access\/(add_language_to_geocode_collection)\/([\w]+)\/([\d]+)\/([\w]+)$ index.php?var1=admin_access&var2=$1&query_string=1&type=landmarks&language=$2&id=$3&apsw=$4 [L]
RewriteRule ^admin_access\/(add_outer_placemark|update_placemark|add_article|update_article|delete_article)\/([\w]+)$ index.php?var1=admin_access&var2=$1&query_string=1&type=landmarks&apsw=$2 [L]
RewriteRule ^generic_access\/(check_avialability_outer_photo_url)$ index.php?var1=generic_access&var2=$1&query_string=1&type=landmarks [L]




# --> главная страница сервиса
RewriteRule ^[\/]?$ index.php?var1=main&query_string=1&type=landmarks [L]


# --> страница карты

#для спам сервиса
RewriteRule ^map\/([\d]+)\/m([\d]+)\/c([\d]+)[\/]?$ index.php?var1=map&query_string=1&type=landmarks&id=$1&transfered_by_spam_email_id=$2&transfered_by_spam_email_code=$3 [L]

RewriteRule ^map\/m([\d]+)\/c([\d]+)\/interest[\/]?$ index.php?var1=map&query_string=1&type=landmarks&transfered_by_spam_email_id=$1&transfered_by_spam_email_code=$2&transfered_by_spam_email_interest=1 [L]
RewriteRule ^map\/m([\d]+)\/c([\d]+)[\/]?$ index.php?var1=map&query_string=1&type=landmarks&transfered_by_spam_email_id=$1&transfered_by_spam_email_code=$2 [L]


# сокращения адресов (action = index)
# Важно - имена контроллеров и имена типов карт не должны совпадать!
RewriteRule ^map[\/]?$ index.php?var1=map&query_string=1&type=landmarks [L]
RewriteRule ^map\/([\d]+)[\/]?$ index.php?var1=map&query_string=1&type=landmarks&id=$1 [L]



# --> страница статей

RewriteRule ^article\/countries\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=article&var2=countries&query_string=1&type=landmarks&country=$1&page_number=$2 [L]
RewriteRule ^article\/categories\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=article&var2=categories&query_string=1&type=landmarks&category=$1&page_number=$2 [L]
RewriteRule ^article\/(countries|categories)[\/]?$ index.php?var1=article&var2=$1&query_string=1&type=landmarks [L]

RewriteRule ^article\/([\d]+)[\/]?$ index.php?var1=article&var2=view&query_string=1&type=landmarks&id=$1 [L]
RewriteRule ^article[\/]?$ index.php?var1=article&var2=countries&query_string=1&type=landmarks [L]

# --> страница каталога
RewriteRule ^catalog\/search[\/]?$ index.php?var1=catalog&var2=search&query_string=1&type=landmarks [L]
RewriteRule ^catalog\/sitemap_countries\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=catalog&var2=sitemap_countries&query_string=1&type=landmarks&country=$1&page_number=$2 [L]
RewriteRule ^catalog\/sitemap_countries[\/]?$ index.php?var1=catalog&var2=sitemap_countries&query_string=1&type=landmarks [L]
RewriteRule ^catalog\/sitemap_categories\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=catalog&var2=sitemap_categories&query_string=1&type=landmarks&category=$1&page_number=$2 [L]
RewriteRule ^catalog\/sitemap_categories[\/]?$ index.php?var1=catalog&var2=sitemap_categories&query_string=1&type=landmarks [L]

RewriteRule ^catalog\/([\w]+)\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=catalog&var2=placemark&query_string=1&type=landmarks&country=$1&state=$2&id=$3 [L]
RewriteRule ^catalog\/([\w]+)\/([\d]+)[\/]?$ index.php?var1=catalog&var2=placemark&query_string=1&type=landmarks&country=$1&id=$2 [L]

RewriteRule ^catalog\/([\w]+)\/([\w]+)[\/]?$ index.php?var1=catalog&var2=state&query_string=1&type=landmarks&country=$1&state=$2 [L]
RewriteRule ^catalog\/([\w]+)[\/]?$ index.php?var1=catalog&var2=country&query_string=1&type=landmarks&country=$1 [L]
RewriteRule ^catalog[\/]?$ index.php?var1=catalog&var2=index&query_string=1&type=landmarks [L]


# для внутренних обращений (ajax и т.д.) action задается второй переменной
#RewriteRule ^$ index.php?query_string=1&%{QUERY_STRING} [L]
RewriteRule ^mvc\/([\w]+)$ index.php?var1=$1&query_string=1&%{QUERY_STRING} [L]
RewriteRule ^mvc\/([\w]+)\/([\w]+)$ index.php?var1=$1&var2=$2&query_string=1&%{QUERY_STRING} [L]
RewriteRule ^mvc\/([\w]+)\/([\w]+)\/([\w]+)$ index.php?var1=$1&var2=$2&var3=$3&query_string=1&%{QUERY_STRING} [L]

RewriteRule ^([\w]+)\/([\w]+)\/(download)\/([\w\.]+)$ index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L]